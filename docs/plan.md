
[[toc]]

# 自定义平台3.0 - 前端工程规划

## 概要

这是一份循序渐进的工程规划，主要包含以下部分：

- 系统架构设计
- 前期准备
  - 关键技术选型
- 工程实施规划
  - 里程碑制定，实施时间节点划分
  - 开发任命
  - 工时估算
- 工程验收
  - 标准
- 后期工程规划
- 名词注解

系统设计核心思路：构建核心引擎驱动，支持并通过 POC 3.1，并且易于扩展 POC 3.2、3.3、3.4 ...

-----

## 前端架构设计

参考文档：https://www.tapd.cn/41909965/documents/show/1141909965001000886 

为了验证架构的可行性，需要搭建一个最小可运行工程，包括工程大部分功能链路（functional chain）的，来验证架构的可行性。

系统迭代必须向前兼容。

-----

## 前期准备（Prerequisites）

### 核心技术选型

- react
  - nextjs - 应用平台 SSR 渲染框架
  - react-dnd - 拖拽技术
- redux
  - redux-saga - 处理异步 action
- css
  - less
  - styled-component - css in js，写 page 更加方便维护，更容易扩展 theme
- 异步请求
  - axios
  - @mini-code/request - 参考处理请求的中间件模式处理 APBDSL 转换
- 三方 UI
  - antd
  - material ui
  - @deer-ui/core/form-generator - 参考表单生成器模式
  - @deer-ui/scaffold - 参考解 DSL 解析器，路由解析器，菜单解析器
- webpack
- typescript
- eslint
- testing
  - jest - 单元测试框架
  - cypress

### 三方库扩展

- 表格控件
  - AG-Grid
  - TreeGrid

### IDE

&gt; 将会写入到 .vscode 中的配置，方便大家统一开发环境

- vscode
- vscode 插件
  - markdown allin one - 编写文档
  - react native tool - coding hint &amp;amp; code snippet（代码提示和代码片段支持）
  - ... 更多
- vscode 设置

-----

## 工程核心功能模块（Core）

1. 建 IUB-DSL 模型（工程的核心 - 用于描述业务场景。理论上如果可以描述完整的业务，系统即可通过 POC 验证。）
   1. 中枢概念以及中枢关系
   2. 数据交换中枢 data traffic hub
   3. 数据源中枢 data source hub
   4. 关系中枢 relationship hub
      1. 数据之间的关系 relationship between data
      2. 组件与数据的关系 relationship between data and component
      3. 更多...
   5. 组件中枢 component hub
   6. 动作中枢 action hub
   7. 布局中枢 content hub
2. IUB-DSL 解析引擎
   1. 包含各中枢的解析器
      1. 数据交换中枢解析器
      2. 数据源中枢解析器
      3. 关系中枢解析器
         1. 数据之间的关系
         2. 组件与数据的关系
         3. 更多...
      4. 组件中枢解析器
      5. 动作中枢解析器
      6. 布局中枢解析器
   2. 包含各中枢的模块调度关系的调度器
3. IUB-DSL 编辑器引擎（负责产出 IUB-DSL）
   1. 通用可视化编辑器引擎
      1. 核心使用拖拽技术 react-DnD
   2. 根据 IUB-DSL 模型中的中枢规则，维护 IUB-DSL 实例数据
   3. 组件接入规范
      1. 组件接入
4. 数据转换器
   1. APB-DSL 转换器
   2. RESTFul 转换器
5. 配置平台 web 前端
   1. 配置平台 web 运行容器
   2. 管理工具运行容器
      1. 数据管理
      2. 菜单管理
      3. ...
   3. 独立应用运行容器
      1. 页面设计器
      2. 流程设计器
      3. ...
6. 应用平台 web 前端
   1. 应用运行容器
   2. 用于应用平台 web 前端，用于支持应用运行
   3. IUB-DSL 实例数据调度
   4. 路由解决方案
      1. 支持多页面共存
      2. 支持页面间传递参数
7. 应用平台 web 服务
   1. 支持应用平台 web 前端的「预览发布应用」
   2. 应用平台 web 前端的静态资源构建
   3. 部署流程
8. 项目整体工程搭建
   1. 体现上述所有功能模块的相互关系
   2. 体现系统架构设计的实现

-----

## POC 3.1 功能预览

[POC 3.1 前端](https://www.tapd.cn/41909965/documents/view/1141909965001000797?file_type=mindmap)

-----

## 项目里程碑（Milestone）

`注释：时: 任务需在那一天前完成`

![图片描述](/tfl/pictures/202005/tapd_41909965_1589788823_27.png)

1. 前期准备 - 2020-04
   - 业务信息收集
   - 技术选型
   - 团队磨合
   - 业务学习
2. 系统设计 - 2020-05-15
   1. 设计系统架构图
   2. 团队统一意见
   3. 功能模块分工
3. 项目实施预热阶段 - 2020-05-27
   1. 确立一期 POC 范围 - 2020-05-18
   2. 完成最小可运行项目，验证架构设计 - 2020-05-20
   3. 通过前端架构方案评审 - 2020-05-27
   4. 定义核心 IUB-DSL - 2020-05-27
      1. Project IUB-DSL
      2. Page IUB-DSL
      3. Router IUB-DSL
   5. 通过实际业务验证 IUB-DSL 的可行性 - 2020-05-27
4. 项目实施阶段 - 2020-09-12
   1. 工程搭建 - 2020-05-22
   2. 应用开发 - 2020-08-22
      1. 数据管理工具
      2. 通用用户验证模块
   3. 核心引擎开发 - 2020-08-22
   4. 根据 POC 3.1 业务开发 - 2020-09-12
5. POC 3.1 验证 - 2020-09-30
   1. 测试并验证系统 - 2020-09-30
      1. 程序修改调整
   2. 完成 POC 3.1 验证 - 2020-09-30
6. 业务扩展 - 2020 ~ 2021
   1. 核心引擎能力扩展
   2. 更多业务编写
7. 未来规划
   1. POC 3.2 规划 - 2020 ~ xx
   2. POC 3.3 规划 - xx
   3. ...
8. 项目应用于生产 - 2021
9. 持续交付 - 2021 ~

-----

## 任务任命（Task appointment）

- 王鹏辉
- 将国才
- 张相杰

-----

## 工程验收（Acceptance）

验收标准：

- POC 3.1 [POC 3.1 前端功能点](https://www.tapd.cn/41909965/documents/view/1141909965001000797?file_type=mindmap)
- POC 3.2
- ...

-----

## 未来工程规划（Future plan）

- 持续开发功能
- 用于实际生产

-----

## 名词注解

- 配置工具平台（PaaS）
  - 使用者（user）：公司内部配置人员。
  - 目的是为了产出可交付的系统
- 应用平台
  - 使用者（user）：公司产品的最终客户。

-----

## 最后（End）

通过这一份指导，明确工程的整个生命周期、工程技术难点，以及团队成员在其中的任务分工，更好的完成自定义平台 3.0 的前端任务，打造更稳定、易扩展、交互优秀的产品，提高效益。

[POC 3.1 前端]: https://www.tapd.cn/41909965/documents/view/1141909965001000797?file_type=mindmap
